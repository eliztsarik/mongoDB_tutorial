# mongoDB_tutorial

1. монго использует BSON а не JSON
2. Возможность создавать вторичные индексы (до 64 над одной коллекцией)

Справка: db.help()
Для получения справки о методе надо вызвать его без скобок
db.table.save - в справке указано, что это обертка над методами insert и update

Для поииска по таблице используется 
db.table.find()
db.table.find({key: "value"})
db.table.find({"key.key1": "value"})
find по дефолту выдает первые 20 записей, чтобы показать следуюшие записи, нужно выполнить команду it

При вставке любого документа или значения, если нет значения "_id", то оно формируется автоматически

для подсчета количества вставленных документов используется db.table.count()

CRUD операции
Вставка и выборка:
1. database.table.insert({key: "value"})
2. database.table.save({key: "value"})
Обновление:
1. database.table.update({key: "value"}, {$set: {key: "value"}})
2. database.table.update({key: "value"}, {$unset: {key: "value"}})
3. database.table.update({"key.key1": "value"}, 
                         {$addToSet: {"key.key1": "value"}}, false, true)
  последний параметр говорит о множественном обновлении. По дефолту операция обновления применяется только для первого подходящего значения
Удаление:
1. db.table.remove() - удалит из коллекции все значения
2. db.table.remove({key: "value"})
3. db.table.drop() - удаляет таблицу

Операции сравнения:
1. $gt - greater than
2. $lt - less than
db.table.find({"$gt": 12345})
db.table.find({"$gt": 1, "$lt": 234})
Индексы:
db.table.find({"$gt": 24332}).explain() - путь выполнения запроса, позволяющий отследить узкие места, посмотреть, какие индексы были использованы, и в целом посмотреть метрики запроса
если тип курсора BasicCursor - для вычисления запроса не использовали индексы.
Построить индекс можно с помощью метода ensureIndex()
db.table.ensureIndex({"key": 1}) - построить индекс по полю key по возрастанию
Для проверки наличия индексов используется метод db.table.getIndexes()

Основы администрирования:
show dbs - показать все доступные БД
show collections/show tables - показывает все коллекции в текущей БД
db.stats()\db.table.stats() - получение низкоуровневой информации о БД или коллекции


